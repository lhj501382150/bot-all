(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-account"],{"2ce2":function(e,t,n){e.exports=n.p+"static/img/tou.cf29dbbd.png"},"78d0":function(e,t,n){"use strict";n.r(t);var r=n("7c03"),o=n("accb");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("fd9b");var i=n("f0c5"),s=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"08809590",null,!1,r["a"],void 0);t["default"]=s.exports},"7c03":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={uniNavBar:n("5053").default,uniPopup:n("6f4f").default,uniForms:n("a17d").default,uniFormsItem:n("8e63").default,uniEasyinput:n("46cb").default},o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"account"},[r("uni-nav-bar",{attrs:{"left-icon":"left",title:"代理中心","background-color":"rgb(40,148,255)",color:"#fff",border:!1},on:{clickLeft:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"row"},[r("v-uni-view",{staticClass:"text"},[e._v("当前账号： "+e._s(e.getStatus(e.userinfo.clevel))+" - "+e._s(e.userno))])],1),r("v-uni-view",{staticClass:"tab-bar"},e._l(e.tabs,(function(t,n){return t.clevel>e.userinfo.clevel?r("v-uni-view",{key:n,staticClass:"tab-item",class:t.clevel==e.tabIndex?"active":"",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.findData(t)}}},[e._v(e._s(t.name))]):e._e()})),1),99==e.tabIndex||e.tabIndex==e.userinfo.clevel+1?r("v-uni-view",{staticClass:"row"},[r("v-uni-button",{staticClass:"add-btn",attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.open.apply(void 0,arguments)}}},[e._v("新建"+e._s(e.getStatus(e.tabIndex)))])],1):e._e(),r("v-uni-scroll-view",{staticStyle:{height:"80%"},attrs:{"scroll-y":"true","refresher-enabled":!1,"refresher-triggered":e.refresherTriggered,"refresher-background":"transparent"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.scrolltolower.apply(void 0,arguments)},refresherrefresh:function(t){arguments[0]=t=e.$handleEvent(t),e.getRefresherrefresh.apply(void 0,arguments)}}},[r("v-uni-view",{staticClass:"record-list"},e._l(e.records,(function(t,o){return r("v-uni-view",{key:o,staticClass:"record-item"},[r("v-uni-view",{staticClass:"user-info"},[r("v-uni-view",{staticClass:"left"},[r("v-uni-image",{attrs:{src:n("2ce2"),mode:"scaleToFill"}})],1),r("v-uni-view",{staticClass:"right"},[r("v-uni-view",{staticClass:"row-item"},[r("v-uni-view",[e._v("ID："+e._s(t.userno))]),r("v-uni-view",[e._v("昵称："+e._s(t.nickname))])],1),r("v-uni-view",{staticClass:"row-item"},[r("v-uni-view",[e._v("所属上级："+e._s(t.parentno))]),2==t.orgtype?r("v-uni-view",[e._v("类型："),t.parentno==e.userinfo.userno?r("v-uni-text",[e._v("直属")]):r("v-uni-text",[e._v("普通")]),e._v("会员")],1):r("v-uni-view",[e._v("类型："+e._s(e.getStatus(e.tabIndex)))])],1),r("v-uni-view",{staticClass:"row-item"},[1==t.orgtype?r("v-uni-view",[e._v("现金额度："+e._s(t.enable)+"/"),r("v-uni-text",{staticStyle:{color:"red"}},[e._v(e._s(t.usequity))])],1):r("v-uni-view",[e._v("现金额度："+e._s(t.enable))]),r("v-uni-view",[e._v("状态："),r("v-uni-text",{class:"sex"+t.sex},[e._v(e._s(e.getSexLabel(t.sex)))])],1)],1)],1)],1),99==e.tabIndex?r("v-uni-view",{staticClass:"report-row"},[r("v-uni-view",[e._v("本周下注金额："+e._s(t.curBail))]),r("v-uni-view",[e._v("本周盈亏："),r("v-uni-text",{staticClass:"loss"},[e._v(e._s(t.curLoss))])],1)],1):e._e(),99==e.tabIndex?r("v-uni-view",{staticClass:"report-row"},[r("v-uni-view",[e._v("上周下注金额："+e._s(t.befBail))]),r("v-uni-view",[e._v("上周盈亏："),r("v-uni-text",{staticClass:"loss"},[e._v(e._s(t.befLoss))])],1)],1):e._e(),r("v-uni-view",{staticClass:"btn-row"},[r("v-uni-view",{staticClass:"btn-item",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.editBalance(t)}}},[e._v("修改现金额度")]),r("v-uni-view",{staticClass:"btn-item",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.openPwdPopup(t)}}},[e._v("密码重置")])],1),r("v-uni-view",{staticClass:"btn-row"},[e.tabIndex<=4?r("v-uni-view",{staticClass:"btn-item",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.showSub(t)}}},[e._v("查看下级")]):e._e(),r("v-uni-view",{staticClass:"btn-item",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.showReport(t)}}},[e._v("报表查询")])],1),r("v-uni-view",{staticClass:"btn-row"},[0!=t.sex?r("v-uni-view",{staticClass:"btn-item",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.changeStatus(t.userno,0)}}},[e._v("启用")]):e._e(),1!=t.sex?r("v-uni-view",{staticClass:"btn-item",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.changeStatus(t.userno,1)}}},[e._v("冻结")]):e._e(),2!=t.sex?r("v-uni-view",{staticClass:"btn-item",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.changeStatus(t.userno,2)}}},[e._v("停用")]):e._e()],1)],1)})),1)],1),r("uni-popup",{ref:"scorePopup",attrs:{type:"center","background-color":"#fff"}},[r("v-uni-view",{staticClass:"form"},[r("v-uni-view",{staticClass:"form-title"},[e._v("修改现金额度")]),r("v-uni-view",{staticClass:"form-sub-title"},[e._v("操作账号："+e._s(e.scoreForm.userId)+"-"+e._s(e.scoreForm.userName))]),r("uni-forms",{ref:"scoreForm",attrs:{modelValue:e.scoreForm,rules:e.scoreFormRules}},[r("uni-forms-item",{attrs:{name:"type"}},[r("v-uni-view",{staticClass:"radio-box"},[r("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChange.apply(void 0,arguments)}}},[r("v-uni-label",[r("v-uni-radio",{attrs:{value:"1",checked:1==e.scoreForm.type}}),r("v-uni-text",[e._v("上分")])],1),r("v-uni-label",[r("v-uni-radio",{attrs:{value:"2",checked:2==e.scoreForm.type}}),r("v-uni-text",[e._v("下分")])],1)],1)],1)],1),r("uni-forms-item",{attrs:{label:"分数",name:"money"}},[r("uni-easyinput",{attrs:{type:"number",placeholder:"请输入分数"},model:{value:e.scoreForm.money,callback:function(t){e.$set(e.scoreForm,"money",t)},expression:"scoreForm.money"}})],1)],1),r("v-uni-view",{staticClass:"form-btn"},[r("v-uni-button",{staticClass:"cal-btn",attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeScorePopup.apply(void 0,arguments)}}},[e._v("取消")]),r("v-uni-button",{staticClass:"sub-btn",attrs:{size:"mini",loading:e.editloding,disabled:e.editloding},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitScore.apply(void 0,arguments)}}},[e._v("确认")])],1)],1)],1),r("uni-popup",{ref:"pwdPopup",attrs:{type:"center","background-color":"#fff"}},[r("v-uni-view",{staticClass:"form"},[r("v-uni-view",{staticClass:"form-title"},[e._v("重置密码")]),r("v-uni-view",{staticClass:"form-sub-title"},[e._v("操作账号："+e._s(e.pwdForm.userId)+"-"+e._s(e.pwdForm.userName))]),r("uni-forms",{ref:"pwdForm",attrs:{modelValue:e.pwdForm,rules:e.pwdFormRules}},[r("uni-forms-item",{attrs:{label:"新密码",name:"paypwd"}},[r("uni-easyinput",{attrs:{type:"password",prefixIcon:"locked",placeholder:"请输入新密码"},model:{value:e.pwdForm.paypwd,callback:function(t){e.$set(e.pwdForm,"paypwd",t)},expression:"pwdForm.paypwd"}})],1),r("uni-forms-item",{attrs:{label:"确认密码",name:"paypwd2"}},[r("uni-easyinput",{attrs:{type:"password",prefixIcon:"locked",placeholder:"请再次输入新密码"},model:{value:e.pwdForm.paypwd2,callback:function(t){e.$set(e.pwdForm,"paypwd2",t)},expression:"pwdForm.paypwd2"}})],1)],1),r("v-uni-view",{staticClass:"form-btn"},[r("v-uni-button",{staticClass:"cal-btn",attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closePwdPopup.apply(void 0,arguments)}}},[e._v("取消")]),r("v-uni-button",{staticClass:"sub-btn",attrs:{size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitPwd.apply(void 0,arguments)}}},[e._v("确认")])],1)],1)],1),r("uni-popup",{ref:"popup",attrs:{type:"bottom","background-color":"#fff"}},[r("v-uni-view",{staticClass:"form"},[r("v-uni-view",{staticClass:"form-title"},[e._v("新建"+e._s(e.getStatus(e.tabIndex)))]),r("uni-forms",{ref:"form",attrs:{modelValue:e.formData,rules:e.rules}},[r("uni-forms-item",{attrs:{label:"账号",name:"userno"}},[r("uni-easyinput",{attrs:{type:"text",prefixIcon:"auth",placeholder:"请输入账号"},model:{value:e.formData.userno,callback:function(t){e.$set(e.formData,"userno",t)},expression:"formData.userno"}})],1),r("uni-forms-item",{attrs:{label:"昵称",name:"nickname"}},[r("uni-easyinput",{attrs:{type:"text",prefixIcon:"person",placeholder:"请输入昵称"},model:{value:e.formData.nickname,callback:function(t){e.$set(e.formData,"nickname",t)},expression:"formData.nickname"}})],1),r("uni-forms-item",{attrs:{label:"密码",name:"paypwd"}},[r("uni-easyinput",{attrs:{type:"password",prefixIcon:"locked",placeholder:"请输入密码"},model:{value:e.formData.paypwd,callback:function(t){e.$set(e.formData,"paypwd",t)},expression:"formData.paypwd"}})],1)],1),r("v-uni-view",{staticClass:"form-btn"},[r("v-uni-button",{staticClass:"cal-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[e._v("取消")]),r("v-uni-button",{staticClass:"sub-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("确认创建")])],1)],1)],1)],1)},a=[]},"9e6e":function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.account[data-v-08809590]{width:%?750?%;height:100vh;background-color:#fff}.account .row[data-v-08809590]{padding-left:%?40?%;padding-right:%?40?%;display:flex;justify-content:space-between;align-items:center}.account .row .add-btn[data-v-08809590]{width:%?400?%;background-color:#2894ff;color:#fff;margin-top:%?20?%}.account .row .text[data-v-08809590]{margin-top:%?40?%}.account .row .search-status[data-v-08809590]{width:%?200?%;margin-top:%?40?%}.account .tab-bar[data-v-08809590]{display:flex;width:%?670?%;padding-left:%?40?%;padding-right:%?40?%}.account .tab-bar .tab-item[data-v-08809590]{width:%?150?%;height:%?80?%;line-height:%?80?%;text-align:center;border-bottom:%?5?% solid #eee}.account .tab-bar .active[data-v-08809590]{border-bottom:%?5?% solid #2894ff}.account .record-list[data-v-08809590]{background-color:#fff}.account .record-list .record-item[data-v-08809590]{padding:%?20?% %?20?% %?10?% %?20?%}.account .record-list .record-item .user-info[data-v-08809590]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?10?%}.account .record-list .record-item .user-info .link[data-v-08809590]{color:#2894ff;cursor:pointer}.account .record-list .record-item .user-info .left[data-v-08809590]{width:%?110?%}.account .record-list .record-item .user-info .left uni-image[data-v-08809590]{width:%?100?%;height:%?100?%}.account .record-list .record-item .user-info .right[data-v-08809590]{width:%?600?%}.account .record-list .record-item .user-info .right .row-item[data-v-08809590]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?10?%}.account .record-list .record-item .user-info .right .row-item .sex0[data-v-08809590]{color:green}.account .record-list .record-item .user-info .right .row-item .sex1[data-v-08809590]{color:orange}.account .record-list .record-item .user-info .right .row-item .sex2[data-v-08809590]{color:red}.account .record-list .record-item .report-row[data-v-08809590]{display:flex;justify-content:space-between;align-items:center;margin-top:%?10?%;margin-bottom:%?10?%;font-size:%?26?%;padding:%?5?% %?20?% %?0?% %?20?%}.account .record-list .record-item .report-row .loss[data-v-08809590]{display:inline-block;min-width:%?100?%}.account .record-list .record-item .btn-row[data-v-08809590]{width:100%;display:flex;justify-content:space-between;align-items:center}.account .record-list .record-item .btn-row .btn-item[data-v-08809590]{width:50%;text-align:center;border:1px solid #eee;padding:%?20?%;color:#2894ff;cursor:pointer}.account .form[data-v-08809590]{width:%?620?%;padding:%?40?%}.account .form .form-title[data-v-08809590]{font-size:16px;font-weight:600;text-align:center;width:100%;margin-bottom:10px}.account .form .form-sub-title[data-v-08809590]{font-size:14px;text-align:center;width:100%;margin-bottom:10px}.account .form .radio-box[data-v-08809590]{text-align:center;width:100%;margin-top:%?20?%}.account .form .form-btn[data-v-08809590]{width:100%;display:flex;justify-content:space-around}.account .form .sub-btn[data-v-08809590]{width:35%;background-color:#2894ff;color:#fff;border-radius:%?20?%}.account .form .cal-btn[data-v-08809590]{width:35%;background-color:#fff;color:#000;border-radius:%?20?%}',""]),e.exports=t},accb:function(e,t,n){"use strict";n.r(t);var r=n("c63d"),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},c5bb:function(e,t,n){var r=n("9e6e");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var o=n("4f06").default;o("2ae83e94",r,!0,{sourceMap:!1,shadowMode:!1})},c63d:function(e,t,n){"use strict";(function(e){n("7a82");var r=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("2909"));n("ac1f"),n("841c"),n("99af"),n("7db0"),n("d3b7");var a=r(n("3f8f")),i={data:function(){var e=this;return{editloding:!1,formData:{userno:"",nickname:"",paypwd:""},rules:{userno:{rules:[{required:!0,errorMessage:"请输入账号"}]},nickname:{rules:[{required:!0,errorMessage:"请输入昵称"}]},paypwd:{rules:[{required:!0,errorMessage:"请输入密码"}]}},userno:"",userinfo:{},tabs:[{clevel:1,name:"分公司"},{clevel:2,name:"股东"},{clevel:3,name:"总代理"},{clevel:4,name:"代理"},{clevel:99,name:"会员"}],sexs:[{value:"0",text:"正常"},{value:"1",text:"冻结"},{value:"2",text:"停用"}],tabIndex:0,records:[],search:{orgtype:"",userno:"",clevel:"",sex:"",pageIdx:0,pageSize:10},totalPage:1,totalCount:0,refresherTriggered:!1,clevelName:"",scoreForm:{type:1,userId:"",userName:"",money:""},scoreFormRules:{money:{rules:[{required:!0,errorMessage:"请输入分数"}]}},pwdForm:{userId:"",userName:"",paypwd:"",paypwd2:""},pwdFormRules:{paypwd:{rules:[{required:!0,errorMessage:"请输入密码"}]},paypwd2:{rules:[{required:!0,errorMessage:"请输入确认密码"},{validateFunction:function(t,n,r,o){return n!=e.pwdForm.paypwd&&o("两次密码输入不一致"),!0}}]}}}},onLoad:function(){this.userno=uni.getStorageSync("userno"),this.userinfo=JSON.parse(uni.getStorageSync("userinfo")),this.userinfo.clevel<4?this.tabIndex=this.userinfo.clevel+1:this.tabIndex=99,this.loadData()},methods:{changeSex:function(){this.getRefresherrefresh()},changeStatus:function(e,t){var n=this,r={userno:e,status:t+""};this.$http.post("/User/ChangeStatus",r,(function(e){0==e.iCode?(uni.showToast({title:"操作成功",icon:"success",duration:3e3}),setTimeout(n.getRefresherrefresh,1e3)):uni.showToast({title:e.sMsg,icon:"error"})}))},showSub:function(e){var t="./accountSub?userno="+e.userno+"&orgtype="+e.orgtype+"&clevel="+this.tabIndex+"&parentno="+e.parentno;uni.navigateTo({url:t})},showReport:function(e){var t="./report?userno="+e.userno+"&orgtype="+e.orgtype+"&clevel="+this.tabIndex;uni.navigateTo({url:t})},radioChange:function(e){this.scoreForm.type=e},closeScorePopup:function(){this.$refs.scorePopup.close(),this.scoreForm.userId="",this.scoreForm.userName="",this.scoreForm.type=1,this.scoreForm.money=""},editBalance:function(e){this.scoreForm.userId=e.userno,this.scoreForm.userName=e.nickname,this.$refs.scorePopup.open()},closePwdPopup:function(){this.$refs.pwdPopup.close(),this.pwdForm.userId="",this.pwdForm.userName="",this.pwdForm.paypwd="",this.pwdForm.paypwd2=""},openPwdPopup:function(e){this.pwdForm.userId=e.userno,this.pwdForm.userName=e.nickname,this.$refs.pwdPopup.open()},submitPwd:function(){var t=this;this.$refs.pwdForm.validate().then((function(e){var n={userno:t.pwdForm.userId,newPAYPWD:(0,a.default)(t.pwdForm.userId+t.pwdForm.paypwd)};t.$http.post("/User/ResetPwd",n,(function(e){0==e.iCode?(uni.showToast({title:"操作成功",icon:"success",duration:3e3}),t.closePwdPopup()):uni.showToast({title:e.sMsg,icon:"error"})}))})).catch((function(t){e.log(t)}))},submitScore:function(){var t=this;this.$refs.scoreForm.validate().then((function(e){t.editloding=!0;var n={userId:t.scoreForm.userId,userName:t.scoreForm.userName},r="";1==t.scoreForm.type?(r="/Account/WebInMoney",n.inMoney=t.scoreForm.money):(r="/Account/WebOutMoney",n.outMoney=t.scoreForm.money),t.$http.post(r,n,(function(e){t.editloding=!1,0==e.iCode?(uni.showToast({title:"操作成功",icon:"success",duration:3e3}),t.closeScorePopup(),setTimeout(t.getRefresherrefresh,1e3)):uni.showToast({title:e.sMsg,icon:"error"})}))})).catch((function(t){e.log(t)}))},findData:function(e){this.tabIndex=e.clevel,this.search.pageIdx=0,this.totalPage=1,this.totalCount=0,this.records=[],this.loadData()},scrolltolower:function(){this.records.length>=this.totalCount||this.loadData()},getRefresherrefresh:function(){this.search.pageIdx=0,this.totalPage=1,this.totalCount=0,this.records=[],this.loadData()},loadData:function(){var e=this;this.search.userno=this.userinfo.userno,99==this.tabIndex?(this.search.orgtype=2,this.search.clevel=null):(this.search.clevel=this.tabIndex,this.search.orgtype=1),this.$http.post("/Query/SubFirmList",this.search,(function(t){var n=t.rData||[];e.records=[].concat((0,o.default)(e.records),(0,o.default)(n)),e.totalCount=t.iCount,e.search.pageIdx>=e.totalCount?e.search.pageIdx=e.totalCount+1:e.search.pageIdx=e.search.pageIdx+e.search.pageSize,e.refresherTriggered=!1}))},getStatus:function(e){if(99==e)return this.userinfo.clevel<4?"直属会员":"普通会员";var t=this.tabs.find((function(t){return t.clevel==e}))||{};return t.name},getSexLabel:function(e){if(e){var t=this.sexs.find((function(t){return e==t.value}))||{};return t.text}},open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()},submit:function(){var t=this;this.$refs.form.validate().then((function(e){var n=Object.assign({},t.formData);n.tjno=t.userno,99==t.tabIndex?n.orgtype=2:n.orgtype=1,n.paypwd=(0,a.default)(t.formData.userno+t.formData.paypwd),t.$http.post("/User/AddAccount",n,(function(e){0==e.iCode?(t.formData.userno="",t.formData.nickname="",t.formData.paypwd="",uni.showToast({title:"添加成功",icon:"success",duration:3e3}),t.getRefresherrefresh(),t.close()):uni.showToast({title:e.sMsg,icon:"error"})}))})).catch((function(t){e.log(t)}))},goBack:function(){uni.switchTab({url:"/pages/user/user"})}}};t.default=i}).call(this,n("5a52")["default"])},fd9b:function(e,t,n){"use strict";var r=n("c5bb"),o=n.n(r);o.a}}]);